clear
install.packages("renv")
renv::init()
renv::restore()
y
Y
q()
install.packages('devtools')
library(devtools)
install.packages('testthat')
library(testthat)
renv::snapshot()
# function input for create_output_dir function
library(ggplot2)
wine_test_data <- data.frame(
alcohol = c(12, 13, 14),
total_phenols = c(2, 3, 4),
cultivar = c("A", "B", "A")
)
# expected output
expected_plot <- ggplot() +
geom_point() +
labs(
title = "Scatter Plot of alcohol vs total_phenols",
x = "alcohol",
y = "total_phenols"
)
source("../R/create_output_dir.R")
source("R/create_output_dir.R")
source("../R/create_scatter_plot.R")
source("R/create_output_dir.R")
"This script generates scatterplot visualizations for the wine dataset.
Usage: 03_scatterplot.R --scatter1=<scatter1> --scatter2=<scatter2> --input_dir=<input_dir> --output_dir=<output_dir>
Options:
--scatter1=<scatter1>           Variable 1 for scatter plot.
--scatter2=<scatter2>           Variable 2 for scatter plot.
--input_dir=<input_dir>           Path to input directory.
--output_dir=<output_dir>         Path to output directory.
" -> doc
library(tidyverse)
library(docopt)
library(ggplot2)
source("R/create_scatter_plot.R")
source("R/create_output_dir.R")
source("R/create_scatter.R")
source("R/create_output_dir.R")
opt <- docopt(doc)
create_output_dir(opt[["--scatter1"]], opt[["--scatter2"]], opt[["--input_dir"]], opt[["--output_dir"]])
library(tidyverse)
library(docopt)
library(ggplot2)
source("R/create_scatter.R")
source("R/create_output_dir.R")
opt <- docopt(doc)
create_output_dir(opt[["--scatter1"]], opt[["--scatter2"]], opt[["--input_dir"]], opt[["--output_dir"]])
#' @param scatter1 The first scatterplot variable
#' @param scatter2 The second scatterplot variable
#' @param input_dir The path to the input directory
#' @param output_dir The path to the output directory
#'
#' @return creates and saves the scatterplot to the right output directory
#' @export
#'
#' @examples
#' create_output_dir(alcohol, total_phenols, 'data/wine_data.csv', 'results/')
create_output_dir <- function(scatter1, scatter2, input_dir, output_dir) {
# create output_dir if it does not exist
if (!dir.exists(output_dir)) {
dir.create(output_dir)
}
# read the data in from the input directory
data <- readr::read_csv(input_dir)
# change cultivar into a factor
data$cultivar <- factor(data$cultivar)
# call function for making a scatterplot
scatter <- create_scatter_plot(data, scatter1, scatter2)
# save the scatterplot to our output directory as a png
ggsave(file.path(output_dir, "scatterplot.png"), scatter, device = "png", width = 5, height = 3)
}
# function input for create_output_dir function
wine_test_data <- data.frame(
alcohol = c(12, 13, 14),
total_phenols = c(2, 3, 4),
cultivar = c("A", "B", "A")
)
empty_data <- data.frame(
alcohol = c(),
total_phenols = c(),
cultivar = c()
)
input_dir <- tempdir()
fake_input_dir <- "fake_input_dir/"
output_dir <- tempdir()
invalid_scatter1 <- "scatter1"
invalid_scatter2 <- "scatter2"
# no expected output because it is just saving a plot to somewhere
create_scatter_plot(wine_test_data, "alcohol", "total_phenols")
scatter <- create_scatter_plot(wine_test_data, "alcohol", "total_phenols")
scatter$x
ggplot_build(scatter)$data[[1]]
ggplot_build(scatter_plot)$data[[1]]$x
ggplot_build(scatter)$data[[1]]
ggplot_build(scatter)$data[[1]]$x
# function input for create_output_dir function
library(ggplot2)
wine_test_data <- data.frame(
alcohol = c(12, 13, 14, 15),
total_phenols = c(2, 3, 4, 5),
cultivar = c("A", "B", "A", "C")
)
#
wine_data_fake <- "a"
# expected output
expected_plot <- ggplot() +
geom_point() +
labs(
title = "Scatter Plot of alcohol vs total_phenols",
x = "alcohol",
y = "total_phenols"
)
color_aes <- ggplot2::ggplot_build(scatter)$data[[1]]$colour
color_aes
expected_color <- ggplot2::scale_colour_manual(values = RColorBrewer::brewer.pal(n = length(unique_cultivars), name = "Set1"))(cultivar)
unique_cultivars <- unique(wine_test_data$cultivar)
expected_color <- ggplot2::scale_colour_manual(values = RColorBrewer::brewer.pal(n = length(unique_cultivars), name = "Set1"))(cultivar)
colors
color_aes <- ggplot2::ggplot_build(scatter_plot)$data[[1]]$colour
scatter_plot <- create_scatter_plot(wine_test_data, "alcohol", "total_phenols")
color_aes <- ggplot2::ggplot_build(scatter_plot)$data[[1]]$colour
color_aes
unique_cultivars <- unique(wine_test_data$cultivar)
unique_cultivars
scatter_plot$data
ggplot2::ggplot_build(scatter_plot)$data[[1]]$colour
ggplot2::ggplot_build(scatter_plot)$data[[1]]
data_output <- create_output_dir('alcohol', 'total_phenols', input_dir, output_dir)
data_output
library(readr)
wine_data <- read_csv("data/wine_data.csv")
View(wine_data)
